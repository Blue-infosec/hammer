language: c
compiler:
  - gcc
  - clang
env:
  - BINDINGS=none
matrix:
  include:
    - compiler: gcc
      language: php
      php: 5.5
      env: BINDINGS=php
    - compiler: clang
      language: php
      php: 5.5
      env: BINDINGS=php
    - compiler: gcc
      language: php
      php: 5.4
      env: BINDINGS=php
    - compiler: clang
      language: php
      php: 5.4
      env: BINDINGS=php
before_install:
  - sudo apt-get update -qq
  - if [ "$BINDINGS" == "php" ]; then sudo apt-get install -qq swig php5-dev; fi
before_script:
  - if [ "$BINDINGS" == "php" ]; then phpenv config-add src/bindings/php/hammer.ini; fi
script: 
  - scons
after_script:
  - if [ "$BINDINGS" == "php" ]; then phpunit -v src/bindings/php/Tests; fi
notifications:
  irc: "irc.upstandinghackers.com#hammer"
